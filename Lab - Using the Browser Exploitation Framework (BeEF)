Objectives
The Browser Exploitation Framework (BeEF) enables penetration testers to perform client-side attacks using the target’s web browser. Pentesters use BeEF to “hook” web browsers. The attacker somehow makes a user execute a JavaScript file name hook.js to take control of the user’s browser and launch further attacks against the target system from within the browser context. The malicious script can be run in various ways, including using a phishing message to make a user go to a webpage that carries the script.

Load the BeEF GUI Environment
Hook the Local Browser to Simulate a Client-Side Attack
Investigate BeEF Exploit Capabilities

Part 1: Load the BeEF GUI Environment
Step 1: Start BeEF.
Open the BeEF application from the Kali Application > All Applications > beef start menu choice. The first time BeEF is run, you will be prompted to change the password for the BeEF user. Enter newbeef as the password.
$ sudo beef-xss
[sudo] password for kali:
[-] You are using the Default credentials
[-] (Password must be different from "beef")
[-] Please type a new password for the beef user: newbeef
At the end of the command output, BeEF indicates that is opening the BeEF web UI in a new browser window.

[*] Opening Web UI (http://127.0.0.1:3000/ui/panel) in: 5... 4... 3... 2... 1...
A browser window will open automatically. This is the BeEF interface. If it does not, open Firefox from the menu bar and enter http://127.0.0.1:3000/ui/authentication as the URL. Log in to BeEF with the username beef 
and your preferred password.



Step 2: Hook the Local Browser to Simulate a Client-Side Attack.
To use BeEF to exploit a target system, you first have to “hook” the target browser. You will use the local system as the target in this lab. If you were running an actual penetration test, your reconnaissance would identify web pages that the user may visit often, as in a watering hole attack. You would use one of the commonly visited web pages to deliver the “beef hook” JavaScript code. In this lab, you will use a demo web page that is included with the BeEF application.

Open a new tab in your Firefox browser. Enter the URL http://127.0.0.1:3000/demos/butcher/index.html.
The fake web page resembles a simple storefront app. It contains JavaScript code which will run in the browser environment when the page is loaded.


Click the Commands tab. This tab is where modules can be executed against the target browser. Expand the command categories in the Module Tree pane. Notice the color-coded icons next to each function. These icons are referred to as “traffic lights”.
Each command module has a traffic light icon, which is used to indicate the following:

Green         The command module works against the target and should be invisible to the user.

Orange       The command module works against the target but may be visible to the user.

White         The command module is yet to be verified against this target.

Red            The command module does not work against this target.


In this step, you will send a fake alert message to the hooked browser window to entice the user to download and install a malicious plug-in.

Click the Commands tab in the BeEF Control Panel. Scroll down to the Social Engineering category. Open the category. Select the Fake Notification Bar (Firefox) choice from the module list. The default URL for the malicious plug-in is listed along with the message that will be shown on the browser window. The exploit will cause an alert to display on the browser. If the user clicks the install button for the fake plug-in, they will be directed to the URL listed.

Change Plugin URL to http://10.6.6.13/. This URL redirects the user to the login screen for the DVWA virtual server. The URL can point to any webpage, either locally stored or on the network. In a live penetration testing environment, this would be a cloned website, a malicious application download, or a webpage containing a malicious script.
Change the alert text to say "AdBlocker Security Extension is out of date. Install the new version now." Click Execute to send the alert to the hooked browser window.

If this is done properly,the message is displayed on the hooked browser window.

The browser is hijacked and forced to go to what could be a malicious website that will download malware to the target computer.

Part 3
Tabnabbing

TabNabbing is a function that redirects the user to a different URL if a browser tab of a hooked browser is idle for a specified length of time.

Open a new instance of Firefox. Navigate to the BeEF login screen using the URL http://127.0.0.1:3000/ui/authentication. Log in with the username of beef and the password of newbeef.
Open a new tab and navigate back to The Butcher web page at http://127.0.0.1:3000/demos/butcher/index.html.
Return to the BeEF Control Panel tab. Select the instance listed under the Online Browsers in the Hooked Browsers panel. Open the Commands tab.
Expand the Social Engineering category. Scroll down and select TabNabbing.

Change the default wait time of the page to your preferred time, before the website switches

BeEF logs activity performed in the hooked browser. The text collected from the screen is displayed in clear text. All activity, including mouse clicks and navigation are recorded in the logs.

